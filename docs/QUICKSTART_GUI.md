# VRChat Pavlok GUI - クイックスタートガイド

## 🚀 5分で始める

### ステップ 1: アプリケーション起動

```bash
python src/main.py
```

↓ Tkinter ウィンドウが起動します

### ステップ 2: 3つのタブを確認

| タブ | 説明 | 操作 |
|------|------|------|
| **ダッシュボード** | リアルタイム状態 | VRChat で Grab を実行して見る |
| **設定** | パラメータ編集 | 値を変更 → 保存 → 再起動 |
| **ログ** | イベントログ | Grab イベントをログで確認 |

---

## 📊 ダッシュボード タブの見方

### **何が表示されるか**

```
┌─────────────────────────────────────┐
│ リアルタイム状態                      │
├─────────────────────────────────────┤
│ Grab 状態: 掴まれています              │  ← VRChat で掴まれているか
│                                      │
│ Stretch 値: 0.654                    │  ← 掴んだ強さ（0.0～1.0）
│ [=========>                  ]       │
│                                      │
│ 計算強度: 45                         │  ← 刺激の強度（15～70）
│ [============>                ]      │
│                                      │
│ OSC 接続: リッスン中                 │  ← OSC サーバーの状態
└─────────────────────────────────────┘
```

### **見方のコツ**

| 状態 | 意味 | アクション |
|------|------|----------|
| "掴まれています" | VRChat で PhysBone を掴んでいる | Stretch を上げて強さを調整 |
| "解放中" | 掴んでいない | なし |
| Stretch 値 > 0.7 | 強くつかんでいる | Zap の強度が高くなる |
| 計算強度 高い | 刺激が大きい | Zap を実行したとき感覚が強い |

---

## ⚙️ 設定 タブの使い方

### **パラメータの意味**

```
┌──────────────────────────────────────┐
│ パラメータ設定                        │
├──────────────────────────────────────┤
│ 刺激の最小値          [15]            │
│                                      │
│ 刺激の最大値          [70]            │  ← 範囲を広げると Zap が強くなる
│                                      │
│ 最小グラブ時間(秒)    [0.8]           │  ← この秒数以上掴むと Zap 発動
│                                      │
│ Stretch最小閾値        [0.07]         │  ← この値以下は反応しない
│                                      │
│ 振動開始 Stretch      [0.7]          │  ← この値で一回目のバイブが来る
│                                      │
│ ヒステリシス Stretch  [0.55]         │  ← この値に下がるまで再バイブしない
│                                      │
│ グラブ開始強度        [20]           │  ← 掴んだ時のバイブの強さ
│                                      │
│ OSC送信間隔(秒)       [0.1]          │  ← Chatbox 更新の頻度
│                                      │
│ [保存]  [キャンセル]  [デフォルト]     │
└──────────────────────────────────────┘
```

### **設定の変更方法**

```
1️⃣  値を変更
    例: 「刺激の最大値」を 70 → 100 に変更

2️⃣  [保存] をクリック
    ↓
    src/config.py に書き込まれる
    → メッセージ表示："設定を保存しました"

3️⃣  アプリケーション再起動
    Ctrl+C で終了
    ↓
    python src/main.py で再起動

4️⃣  確認
    新しい設定が適用されている
```

### **よくある設定**

#### **A. Zap を強くしたい**
```
刺激の最大値: 70 → 100
振動開始 Stretch: 0.7 → 0.5  （敏感に反応）
```

#### **B. Zap を弱くしたい**
```
刺激の最大値: 70 → 50
振動開始 Stretch: 0.7 → 0.8  （鈍感）
```

#### **C. 短い掴みでも Zap を発動したい**
```
最小グラブ時間: 0.8 → 0.3  （0.3秒で発動）
```

---

## 📋 ログ タブの見方

### **何が表示されるか**

```
┌────────────────────────────────────────────────┐
│ [ログをクリア] [✓ 自動スクロール]              │
├────────────────────────────────────────────────┤
│ 2026-02-23 10:00:00 - __main__ - INFO - ...  │  ← 通常ログ（黒）
│ 2026-02-23 10:00:05 - __main__ - INFO - ...  │
│ 2026-02-23 10:00:10 - __main__ - WARNING - ..│  ← 警告（オレンジ）
│ 2026-02-23 10:00:15 - __main__ - ERROR - ... │  ← エラー（赤）
│                                              │
│ （自動スクロールで新しいログが下に表示される）  │
└────────────────────────────────────────────────┘
```

### **よく見るログメッセージ**

| メッセージ | 意味 | アクション |
|-----------|------|----------|
| `[GRAB START]` | Grab 開始 | なし（自動） |
| `[STRETCH THRESHOLD EXCEEDED]` | Stretch が高い → バイブ | なし（自動） |
| `[GRAB END VIBRATION] Intensity: XX` | Grab 終了 → Zap 発動 | 感覚確認 |
| `[STIMULUS SKIPPED]` | 時間/強度不足で Zap キャンセル | なし（仕様） |
| `ERROR` | エラー発生 | ログを確認してデバッグ |

---

## 🎮 実際に使ってみよう

### **シナリオ 1: Zap の強度確認**

```
1. ダッシュボード タブで「計算強度」を見ながら Grab
2. Stretch をゆっくり上げて、強度がどう変わるか見る
3. 強度 = 30 → 力が弱い
   強度 = 70 → 力が強い
```

### **シナリオ 2: Grab 時間の確認**

```
1. ログ タブを見ながら Grab
2. 0.5 秒掴む
   ↓
   ログに「[STIMULUS SKIPPED] Too short」と出る

3. 1.0 秒掴む
   ↓
   ログに「[GRAB END ZAP]」と出る（Zap が発動）
```

### **シナリオ 3: パラメータ調整**

```
1. 設定 タブで「刺激の最大値」を変更
2. [保存] → アプリケーション再起動
3. ダッシュボードで「計算強度」の最大値が変わったか確認
```

---

## 🆘 トラブルシューティング

### **Q: GUI が起動しない**

**A:** 依存ライブラリをインストール
```bash
pip install python-osc requests python-dotenv
```

### **Q: OSC がリッスンしていない**

**A:** VRChat が OSC を有効にしているか確認
```
VRChat > Settings > OSC > Enabled ✓
```

### **Q: Grab 状態が更新されない**

**A:** 以下を確認
1. VRChat で PhysBone に Shock_PB タグがついているか
2. GUI のダッシュボード タブを見ているか
3. ネットワーク接続を確認

### **Q: 設定を保存したのに反映されない**

**A:** アプリケーション再起動が必要です
```bash
Ctrl+C で終了
python src/main.py で再起動
```

---

## 📞 さらに詳しく

詳細は `GUI_IMPLEMENTATION.md` を参照してください：
- アーキテクチャ説明
- スレッド構成
- データ共有メカニズム
- テスト結果

---

## 🎉 楽しむコツ

1. **ダッシュボード で リアルタイム状態を見ながら遊ぶ**
   - Grab の反応を即座に確認

2. **ログで イベントを追跡**
   - Zap がいつ発動したか、どの強度だったか

3. **設定を調整して自分好みにカスタマイズ**
   - 敏感さ、強さ、時間 を好みに調整

---

**楽しい VRChat ライフを！** 🎮✨
